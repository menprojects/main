<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr"

  
  xmlns:og="http://ogp.me/ns#"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:sioc="http://rdfs.org/sioc/ns#"
  xmlns:sioct="http://rdfs.org/sioc/types#"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#">

  <head profile="http://www.w3.org/1999/xhtml/vocab">
    <meta charset="utf-8" />
<link rel="apple-touch-icon" href="https://www.fromdual.com/sites/all/themes/fromdual/images/apple-touch-icon.png" type="image/png" />
<link rel="apple-touch-icon-precomposed" href="https://www.fromdual.com/sites/all/themes/fromdual/images/apple-touch-icon-precomposed.png" type="image/png" />
<meta name="description" content="Table of Contents Accounts not properly closing connections Unused indexes Who created temporary (disk) tables Accounts which never connected since last start-up Users which never connected since last start-up Totally unused accounts (never connected since last restart and not used to check Stored Program or View privileges) since last start-up SHOW FULL PROCESSLIST Storage" />
<meta name="abstract" content="FromDual is a Neutral and Vendor independent service company for MariaDB, MySQL and Galera Cluster providing Consulting, Training, remote-DBA and Support Services for MariaDB and MySQL." />
<meta name="keywords" content="mysql, mariadb, percona, galera, support, remote-dba, consulting, training" />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="https://www.fromdual.com/mysql-performance-schema-hints" />
<link rel="shortlink" href="https://www.fromdual.com/node/794" />
<meta property="og:site_name" content="FromDual" />
<meta property="og:type" content="article" />
<meta property="og:title" content="MySQL PERFORMANCE_SCHEMA Hints" />
<meta property="og:url" content="https://www.fromdual.com/mysql-performance-schema-hints" />
<meta property="og:description" content="Table of Contents Accounts not properly closing connections Unused indexes Who created temporary (disk) tables Accounts which never connected since last start-up Users which never connected since last start-up Totally unused accounts (never connected since last restart and not used to check Stored Program or View privileges) since last start-up SHOW FULL PROCESSLIST Storage Engines per schema Tables without a Primary Key Bad SQL queries of users SHOW PROFILE in PERFORMANCE_SCHEMA SELECT, INSERT, UPDATE and DELETE per table Top long running queries Tables never written to DML, DDL and DCL per" />
<meta property="og:updated_time" content="2020-02-14T09:34:28+01:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="MySQL PERFORMANCE_SCHEMA Hints" />
<meta name="twitter:url" content="https://www.fromdual.com/mysql-performance-schema-hints" />
<meta name="twitter:description" content="Table of Contents Accounts not properly closing connections Unused indexes Who created temporary (disk) tables Accounts which never connected since last start-up Users which never connected since" />
<meta property="article:published_time" content="2013-07-14T09:29:09+02:00" />
<meta property="article:modified_time" content="2020-02-14T09:34:28+01:00" />
<meta itemprop="name" content="MySQL PERFORMANCE_SCHEMA Hints" />
<meta itemprop="description" content="Table of Contents Accounts not properly closing connections Unused indexes Who created temporary (disk) tables Accounts which never connected since last start-up Users which never connected since last start-up Totally unused accounts (never connected since last restart and not used to check Stored Program or View privileges) since last start-up SHOW FULL PROCESSLIST Storage Engines per schema Tables without a Primary Key Bad SQL queries of users SHOW PROFILE in PERFORMANCE_SCHEMA SELECT, INSERT, UPDATE and DELETE per table Top long running queries Tables never written to DML, DDL and DCL per" />
<meta name="dcterms.title" content="MySQL PERFORMANCE_SCHEMA Hints" />
<meta name="dcterms.creator" content="oli" />
<meta name="dcterms.description" content="Table of Contents Accounts not properly closing connections Unused indexes Who created temporary (disk) tables Accounts which never connected since last start-up Users which never connected since last start-up Totally unused accounts (never connected since last restart and not used to check Stored Program or View privileges) since last start-up SHOW FULL PROCESSLIST Storage Engines per schema Tables without a Primary Key Bad SQL queries of users SHOW PROFILE in PERFORMANCE_SCHEMA SELECT, INSERT, UPDATE and DELETE per table Top long running queries Tables never written to DML, DDL and DCL per" />
<meta name="dcterms.date" content="2013-07-14T09:29+02:00" />
<meta name="dcterms.type" content="Text" />
<meta name="dcterms.format" content="text/html" />
<meta name="dcterms.identifier" content="https://www.fromdual.com/mysql-performance-schema-hints" />
<link rel="shortcut icon" href="https://www.fromdual.com/sites/all/themes/fromdual/images/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="dcterms.modified" content="2020-02-14T09:34+01:00" />
    <title>MySQL PERFORMANCE_SCHEMA Hints | FromDual</title>
    <link rel="stylesheet" href="https://www.fromdual.com/sites/default/files/css/css_xE-rWrJf-fncB6ztZfd2huxqgxu4WO-qwma6Xer30m4.css" media="all" />
<link rel="stylesheet" href="https://www.fromdual.com/sites/default/files/css/css_glLYUs63GsGK1vCQLWQRLQMQEbL6rxxLLwDt_vbvTv4.css" media="all" />
<link rel="stylesheet" href="https://www.fromdual.com/sites/default/files/css/css_Kwa0UDz4gWMoLxZZ6_LyNA2SBh8u5CnKedaVrxsr7mM.css" media="all" />
<link rel="stylesheet" href="https://www.fromdual.com/sites/default/files/css/css_MzGRCNcTjHrr2ydOOz_S8tcC6g_EyqFGVHnkkcUlSSo.css" media="all" />
<link rel="stylesheet" href="https://www.fromdual.com/sites/default/files/css/css_mDxCF8ImVBb6oiL7Rq6KarwvxmvDV5PjnhYNE29pt_0.css" media="print" />
    <script src="https://www.fromdual.com/sites/default/files/js/js_qikmINIYTWe4jcTUn8cKiMr8bmSDiZB9LQqvceZ6wlM.js"></script>
<script src="https://www.fromdual.com/sites/default/files/js/js_heruoYu9RQbGJ2RIrHnL-ni5OJdhmGXHenv9X1igAz4.js"></script>
<script src="https://www.fromdual.com/sites/default/files/js/js_fCY3vxpyjRzCf8iI8UUw-fisMlfFqhVR4PTyed4GZ2s.js"></script>
<script>
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"fromdual","theme_token":"iPSE15pjvQa4RE80tkBM4t0zPmq7ROXzA4LS1RppV58","js":{"misc\/jquery.js":1,"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/tablesorter\/tablesortervar.js":1,"sites\/all\/modules\/comment_notify\/comment_notify.js":1,"sites\/all\/libraries\/tablesorter\/jquery.tablesorter.min.js":1,"sites\/all\/libraries\/tablesorter\/jquery.metadata.js":1,"sites\/all\/libraries\/tablesorter\/addons\/pager\/jquery.tablesorter.pager.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"sites\/all\/modules\/date\/date_api\/date.css":1,"modules\/field\/theme\/field.css":1,"sites\/all\/modules\/logintoboggan\/logintoboggan.css":1,"modules\/node\/node.css":1,"modules\/poll\/poll.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"modules\/forum\/forum.css":1,"sites\/all\/modules\/views\/css\/views.css":1,"sites\/all\/modules\/comment_notify\/comment_notify.css":1,"sites\/all\/themes\/fromdual\/css\/noexist_tabs.css":1,"sites\/all\/modules\/ctools\/css\/ctools.css":1,"modules\/locale\/locale.css":1,"sites\/all\/themes\/fromdual\/css\/default.css":1,"sites\/all\/themes\/fromdual\/fonts\/stylesheet.css":1,"sites\/all\/themes\/fromdual\/css\/layout.css":1,"sites\/all\/themes\/fromdual\/css\/style.css":1,"sites\/all\/themes\/fromdual\/css\/print.css":1}},"tablesorter":{"zebra":1,"odd":"odd","even":"even"},"urlIsAjaxTrusted":{"\/mysql-performance-schema-hints":true}});
</script>
  </head>

  <body class="html not-front not-logged-in one-sidebar sidebar-first page-node page-node- page-node-794 node-type-page i18n-en" >
    GIVE ALL CREDIT TO https://www.fromdual.com/mysql-performance-schema-hints.
    This is too valuable to lose. Just meant for archival purposes. 

    <div id="skip">
      <a href="#main-menu">Jump to Navigation</a>
    </div>
        <div id = "top">
<div id="page" class="page">

<!-- ______________________ HEADER _______________________ -->

<div id ="page-inner">
  <div id="header">

          <a href="/" title="Home" rel="home" id="logo">
        <img src="https://www.fromdual.com/sites/all/themes/fromdual/images/logo.png" alt="Home"/>
      </a>
    
    
          <div id="header-region">
          <div class="region region-header">
    <div id="block-locale-language" class="block block-locale clearfix">
  <div class="block-inner">

                <h2 class="block-title">Languages</h2>
          		
		<div class="content" >
		  <ul class="language-switcher-locale-url"><li class="en first active"><a href="/mysql-performance-schema-hints" class="language-link active" xml:lang="en"><img class="language-icon" typeof="foaf:Image" src="https://www.fromdual.com/sites/all/modules/languageicons/flags/en.png" width="16" height="11" alt="English" title="English" /></a></li>
<li class="de last"><a href="/de/mysql-performance-schema-hints" class="language-link" xml:lang="de"><img class="language-icon" typeof="foaf:Image" src="https://www.fromdual.com/sites/all/modules/languageicons/flags/de.png" width="16" height="11" alt="Deutsch" title="Deutsch" /></a></li>
</ul>		</div>

  </div>
</div> <!-- /block-inner /block --><div id="block-block-11" class="block block-block clearfix">
  <div class="block-inner">

                <h2 class="block-title">Login</h2>
          		
		<div class="content" >
		  <div id="loginbox">
Welcome, <strong>
Guest</strong>. | <a href="/user">Login</a></div>		</div>

  </div>
</div> <!-- /block-inner /block --><div id="block-search-form" class="block block-search clearfix">
  <div class="block-inner">

                		
		<div class="content" >
		  <form action="/mysql-performance-schema-hints" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
      <h2 class="element-invisible">Search form</h2>
    <div class="form-item form-type-searchfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." onblur="if (this.value == &#039;&#039;) {this.value = &#039;Search FromDual...&#039;;}" onfocus="if (this.value == &#039;Search FromDual...&#039;) {this.value = &#039;&#039;;}" type="search" id="edit-search-block-form--2" name="search_block_form" value="Search FromDual..." size="20" maxlength="128" class="form-text form-search" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="image" id="edit-submit" name="submit" src="/sites/all/themes/fromdual/images/searchbutton.gif" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-N9Bc0IO-iCvp4M8YdRllEE5UlgYCesMV2OoSQE6szJE" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>		</div>

  </div>
</div> <!-- /block-inner /block --><div id="block-menu_block_split-2" class="block block-menu-block-split clearfix">
  <div class="block-inner">

                		
		<div class="content" >
		  <ul class="menu"><li class="leaf menu-246 first "><a href="/home" title="All about FromDual - MySQL Support provider">About us</a></li><li class="leaf menu-115"><a href="/our-services" title="FromDual services for MySQL and MariaDB">Services</a></li><li class="leaf menu-138"><a href="/tools" title="FromDual tools for MySQL and MariaDB">Tools</a></li><li class="leaf menu-957"><a href="/resources" title="More information about MySQL and MariaDB provided by FromDual.">Resources</a></li><li class="leaf menu-5402 last "><a href="/download" title="FromDual Software Download">Download</a></li></ul>		</div>

  </div>
</div> <!-- /block-inner /block -->  </div>
      </div>
    
  </div> <!-- /header -->

  <!-- ______________________ MAIN _______________________ -->

  <div id="main" class="clearfix">

    <div id="content">
      <div id="maintop"></div>

      <div id="content-inner" class="inner column center">

                  <div id="content-header">

            <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="/">Home</a></div>
            
                          <h1 class="title">MySQL PERFORMANCE_SCHEMA Hints</h1>
            
                        
                          <div class="tabs"></div>
            
            
          </div> <!-- /#content-header -->

        
        <div id="content-area">

            <div class="region region-content">
    <div id="block-system-main" class="block block-system clearfix">
  <div class="block-inner">

                		
		<div class="content" >
		  <div id="node-794" class="node node-page">
	<div class="node-inner">

    
    
    
  	<div class="content">
  	  <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><h2>Table of Contents</h2>

<ul><li><a href="#accounts-not-properly-closing">Accounts not properly closing connections</a></li>
  <li><a href="#unused-indexes">Unused indexes</a></li>
  <li><a href="#who-created-temporary-tables">Who created temporary (disk) tables</a></li>
  <li><a href="#accounts-which-never-connected">Accounts which never connected since last start-up</a></li>
  <li><a href="#user-which-never-connected">Users which never connected since last start-up</a></li>
  <li><a href="#totally-unused-accounts">Totally unused accounts (never connected since last restart and not used to check Stored Program or View privileges) since last start-up</a></li>
  <li><a href="#show-full-processlist"><code>SHOW FULL PROCESSLIST</code></a></li>
  <li><a href="#storage-engine-per-schema">Storage Engines per schema</a></li>
  <li><a href="#tables-without-primary-key">Tables without a Primary Key</a></li>
  <li><a href="#bad-sql-queries-of-users">Bad SQL queries of users</a></li>
  <li><a href="#show-profile-in-performance_schema"><code>SHOW PROFILE</code> in <code>PERFORMANCE_SCHEMA</code></a></li>
  <li><a href="#select-insert-update-and-delete-per-table"><code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code> and <code>DELETE</code> per table</a></li>
  <li><a href="#top-long-running-queries">Top long running queries</a></li>
  <li><a href="#tables-never-written-to">Tables never written to</a></li>
  <li><a href="#dml-ddl-dcl-per-account">DML, DDL and DCL per account</a></li>
  <li><a href="#erroneous-mysql-queries">Finding syntactically wrong/erroneous MySQL queries</a></li>
  <li><a href="#finding-queries-served-by-query-cache">Finding queries served by MySQL Query Cache</a></li>
  <li><a href="#grant-sys-schema-access">Grant access to <code>sys</code> schema to another user</a></li>
  <li><a href="#grant-ps-schema-access">Grant access to <code>PERFORMANCE_SCHEMA</code> schema to another user</a></li>
  <li><a href="#innodb-locks">Find InnoDB Locks</a></li>
  <li><a href="#metadata-locks">Find Metadata Locks</a></li>
  <li><a href="#statements-before-sleep">What did a Connection before sleeping?</a></li>
  <li><a href="#how-many-statements-did-another-connection">How many statements did another (sleeping) connection?</a></li>
</ul><h2>MariaDB</h2>

<p>On MariaDB you have to enable the Performance Schema first before use:</p>

<pre>
[mysqld]
performance_schema_consumer_events_statements_history_long = ON
performance_schema             = ON
</pre><br /><h2 id="accounts-not-properly-closing">Accounts not properly closing connections [ <a href="http://mysqlblog.fivefarmers.com/2013/07/08/practical-p_s-finding-which-accounts-fail-to-properly-close-connections/" title="Practical PERFORMANCE_SCHEMA: Finding which accounts fail to properly close connections" target="_blank">1</a> ]</h2>

<p>Works since 5.6</p>

<pre>
SELECT ess.user, ess.host
     , (a.total_connections - a.current_connections) - ess.count_star as not_closed
     , ((a.total_connections - a.current_connections) - ess.count_star) * 100 /
       (a.total_connections - a.current_connections) as pct_not_closed
  FROM performance_schema.events_statements_summary_by_account_by_event_name ess
  JOIN performance_schema.accounts a on (ess.user = a.user and ess.host = a.host)
 WHERE ess.event_name = 'statement/com/quit'
   AND (a.total_connections - a.current_connections) &gt; ess.count_star
;
+-----------+---------------+------------+----------------+
| user      | host          | not_closed | pct_not_closed |
+-----------+---------------+------------+----------------+
| applicat  |   10.0.246.74 |         31 |         0.0001 |
| applicat  |   10.0.246.73 |         59 |         0.0003 |
| replicate |   10.0.246.72 |          1 |       100.0000 |
| applicat  |   10.0.246.76 |          4 |         0.0024 |
| root      | localhost     |          3 |         0.0053 |
| applicat  | localhost     |      51880 |         0.2991 |
| applicat  |   10.0.246.77 |          1 |       100.0000 |
+-----------+---------------+------------+----------------+
</pre><br /><h2 id="unused-indexes">Unused indexes [ <a href="http://www.markleith.co.uk/2011/04/18/monitoring-table-and-index-io-with-performance_schema/" title="Monitoring Table and Index IO with PERFORMANCE_SCHEMA" target="_blank">2</a> ]</h2>

<p>Works since 5.6</p>

<pre>
SELECT object_schema, object_name, index_name
  FROM performance_schema.table_io_waits_summary_by_index_usage
 WHERE index_name IS NOT NULL
   AND index_name != 'PRIMARY'
   AND count_star = 0
   AND object_schema NOT IN ('mysql', 'performance_schema')
 ORDER BY object_schema, object_name
;
+---------------+------------------+------------+
| object_schema | object_name      | index_name |
+---------------+------------------+------------+
| applicat      | access           | name       |
| applicat      | access           | owner      |
| applicat      | access           | source     |
| applicat      | access           | password   |
| applicat      | access           | type_2     |
| applicat      | access           | type_3     |
| applicat      | active_customers | scustomer  |
| applicat      | addresses        | domain     |
| applicat      | addresses        | dtype      |
...
| applicat      | timegroups       | name       |
| applicat      | transactions     | customer   |
| applicat      | unlimited_access | name       |
| applicat      | urls             | name       |
| applicat      | vouchers         | batch      |
| applicat      | voucher_batches  | customer   |
+---------------+------------------+------------+
279 rows in set (2.43 sec)
</pre><br /><h2 id="who-created-temporary-tables">Who created temporary (disk) tables</h2>

<p>Works since 5.6</p>

<pre>
SELECT user, host, event_name, count_star AS cnt
     , sum_created_tmp_disk_tables AS tmp_disk_tables, sum_created_tmp_tables AS tmp_tables
  FROM performance_schema.events_statements_summary_by_account_by_event_name
 WHERE sum_created_tmp_disk_tables &gt; 0
    OR sum_created_tmp_tables &gt; 0
;
+----------+---------------+---------------------------------+------------+-----------------+------------+
| user     | host          | event_name                      | cnt        | tmp_disk_tables | tmp_tables |
+----------+---------------+---------------------------------+------------+-----------------+------------+
| applicat |   10.0.246.74 | statement/sql/select            |  565349929 |               0 |   10293241 |
| applicat |   10.0.246.74 | statement/sql/show_fields       |          8 |               8 |          8 |
| applicat |   10.0.246.73 | statement/sql/select            |  571206486 |               0 |   10429993 |
| applicat |   10.0.246.73 | statement/sql/show_databases    |          2 |               0 |          2 |
| applicat |   10.0.246.76 | statement/sql/select            |   17814977 |               0 |       2696 |
| applicat |   10.0.246.76 | statement/sql/show_databases    |          7 |               0 |          7 |
| applicat |   10.0.246.76 | statement/sql/show_tables       |         10 |               0 |         10 |
| applicat | localhost     | statement/sql/select            | 1856221142 |             828 |    4142585 |
| applicat | localhost     | statement/sql/show_databases    |          7 |               0 |          7 |
| applicat | localhost     | statement/sql/show_tables       |          7 |               0 |          7 |
| applicat | localhost     | statement/sql/update_multi      |         14 |               2 |          3 |
+----------+---------------+---------------------------------+------------+-----------------+------------+
28 rows in set (0.02 sec)
</pre><br /><pre>
SELECT schema_name, substr(digest_text, 1, 40) AS statement, count_star AS cnt
     , sum_created_tmp_disk_tables AS tmp_disk_tables, sum_created_tmp_tables AS tmp_tables
  FROM performance_schema.events_statements_summary_by_digest
 WHERE sum_created_tmp_disk_tables &gt; 0
    OR sum_created_tmp_tables &gt; 0
;
+-------------+------------------------------------------+----------+-----------------+------------+
| schema_name | statement                                | cnt      | tmp_disk_tables | tmp_tables |
+-------------+------------------------------------------+----------+-----------------+------------+
| applicat    | SELECT * FROM `bulk_campaigns` WHERE `ac | 11858959 |               0 |   11858965 |
| applicat    | SELECT * FROM `machines` WHERE `asterisk |   933720 |               0 |     933720 |
| applicat    | SELECT SOCKET FROM `location` WHERE `use |  3206476 |               0 |    3206476 |
| applicat    | SELECT `g` . `id` , `t` . `dtype` , `t`  |  1408417 |               0 |    1408418 |
| applicat    | SELECT COUNT ( * ) AS `count` FROM ( SEL |    47048 |               0 |      47048 |
| applicat    | SELECT `peer` , COUNT ( * ) AS `count` F |   156720 |               0 |     152536 |
| applicat    | SELECT SUM ( `c` ) AS `count` FROM ( SEL |  3045114 |               0 |    6090350 |
| applicat    | SELECT DISTINCTROW ( `queue` ) FROM `que |   836798 |               0 |     836798 |
| applicat    | SELECT `dtype` , `dnumber` FROM `bulk_de |   897447 |               0 |      22327 |
| applicat    | SELECT * FROM `information_schema` . `PR |       49 |              49 |         49 |
| applicat    | SELECT COUNT ( * ) AS `count` FROM ( SEL |   264196 |               0 |     264240 |
| applicat    | SELECT `p` . * , `p` . `secret` AS PASSW |      590 |             590 |        590 |
| applicat    | SELECT `p` . `name` , `p` . `customer` , |      227 |             227 |        227 |
+-------------+------------------------------------------+----------+-----------------+------------+
79 rows in set (0.15 sec)
</pre><br /><h2 id="accounts-which-never-connected">Accounts which never connected since last start-up [ <a href="http://falseisnotnull.wordpress.com/2013/09/14/how-to-find-unused-mariadbmysql-accounts" target="_blank" title="How to find unused MariaDB/MySQL accounts">3</a> ]</h2>

<p>Works since 5.6</p>

<pre>
SELECT DISTINCT m_u.user, m_u.host
  FROM mysql.user m_u
  LEFT JOIN performance_schema.accounts ps_a ON m_u.user = ps_a.user AND m_u.host = ps_a.host
 WHERE ps_a.user IS NULL
ORDER BY m_u.user
;</pre><br /><h2 id="user-which-never-connected">Users which never connected since last start-up</h2>

<p>Works since 5.6</p>

<pre>
SELECT DISTINCT m_u.user
  FROM mysql.user m_u
  LEFT JOIN performance_schema.users ps_u ON m_u.user = ps_u.user
 WHERE ps_u.user IS NULL
 ORDER BY m_u.user
;
+-----------+-----------+
| user      | host      |
+-----------+-----------+
| applicat  | %         |
| replicate | %         |
| root      | ::1       |
| root      | 127.0.0.1 |
| root      | sip10     |
+-----------+-----------+
</pre><br /><h2 id="totally-unused-accounts">Totally unused accounts (never connected since last restart and not used to check Stored Program or View privileges) since last start-up</h2>

<p>Works since 5.6</p>

<pre>
SELECT DISTINCT m_u.user, m_u.host
  FROM mysql.user m_u
  LEFT JOIN performance_schema.accounts ps_a ON m_u.user = ps_a.user AND ps_a.host = m_u.host
  LEFT JOIN information_schema.views is_v ON is_v.DEFINER = CONCAT(m_u.User, '@', m_u.Host) AND is_v.security_type = 'DEFINER'
  LEFT JOIN information_schema.routines is_r ON is_r.DEFINER = CONCAT(m_u.User, '@', m_u.Host) AND is_r.security_type = 'DEFINER'
  LEFT JOIN information_schema.events is_e ON is_e.definer = CONCAT(m_u.user, '@', m_u.host)
  LEFT JOIN information_schema.triggers is_t ON is_t.definer = CONCAT(m_u.user, '@', m_u.host)
 WHERE ps_a.user IS NULL
   AND is_v.definer IS NULL
   AND is_r.definer IS NULL
   AND is_e.definer IS NULL
   AND is_t.definer IS NULL
 ORDER BY m_u.user, m_u.host
;
+-----------+-----------+
| user      | host      |
+-----------+-----------+
| applicat  | %         |
| replicate | %         |
| root      | 127.0.0.1 |
| root      | ::1       |
| root      | sip10     |
+-----------+-----------+
5 rows in set (0.04 sec)
</pre><br /><h2 id="show-full-processlist">SHOW FULL PROCESSLIST</h2>

<p>Works since 5.5 (5.1?)</p>

<p>But with filter on Sleep and sorting by time to find the evil query...</p><pre>
SELECT id, user, host, db, command, time, state, LEFT(info, 80) AS info
  FROM information_schema.processlist
 WHERE command NOT IN ('Sleep', 'Binlog Dump')
 ORDER BY time ASC
;</pre><br /><p>Non blocking version, since 5.6:</p>

<pre>
SELECT PROCESSLIST_ID AS id, PROCESSLIST_USER AS user, PROCESSLIST_HOST AS host, PROCESSLIST_DB AS db
     , PROCESSLIST_COMMAND AS command, PROCESSLIST_TIME AS time, PROCESSLIST_STATE AS state
     , LEFT(PROCESSLIST_INFO, 80) AS info
  FROM performance_schema.threads
 WHERE PROCESSLIST_ID IS NOT NULL
   AND PROCESSLIST_COMMAND NOT IN ('Sleep', 'Binlog Dump')
 ORDER BY PROCESSLIST_TIME ASC
;</pre><br /><h2 id="storage-engine-per-schema">Storage Engines per schema</h2>

<p>For defining backup strategy, preparing migration to InnoDB or Galera Cluster for MySQL, etc.</p>

<p>Works since 5.5 (5.1?)</p>

<pre>
SELECT table_schema AS `schema`, engine, COUNT(*) AS `tables`
     , ROUND(SUM(data_length)/1024/1024, 0) AS data_mb
     , ROUND(SUM(index_length)/1024/1024, 0) index_mb
  FROM information_schema.tables
 WHERE table_schema NOT IN ('mysql', 'information_schema', 'performance_schema')
   AND engine IS NOT NULL
 GROUP BY table_schema, engine
;
+---------------------+--------+--------+---------+----------+
| schema              | engine | tables | data_mb | index_mb |
+---------------------+--------+--------+---------+----------+
| mantis              | MyISAM |     31 |       0 |        0 |
| mpm                 | InnoDB |      3 |       0 |        0 |
| mysql_sequences     | InnoDB |      2 |       0 |        0 |
| mysql_sequences     | MEMORY |      1 |       0 |        0 |
| otrs                | InnoDB |     73 |      13 |        4 |
| quartz              | InnoDB |     12 |       0 |        0 |
| tracking            | MyISAM |      1 |       0 |        0 |
+---------------------+--------+--------+---------+----------+</pre><br /><h2 id="tables-without-primary-key">Tables without a Primary Key</h2>

<p>Galera Cluster, InnoDB, M/S replication with row based replication does not work well with tables without a Primary Key. To find those the following query helps:</p>

<p>Works since 5.5 (5.1?)</p>

<pre>
SELECT DISTINCT t.table_schema, t.table_name
  FROM information_schema.tables AS t
  LEFT JOIN information_schema.columns AS c ON t.table_schema = c.table_schema AND t.table_name = c.table_name
        AND c.column_key = "PRI"
 WHERE t.table_schema NOT IN ('information_schema', 'mysql', 'performance_schema')
   AND c.table_name IS NULL AND t.table_type != 'VIEW'
;
+--------------+----------------------+
| table_schema | table_name           |
+--------------+----------------------+
| test         | t_wo_pk              |
| test         | t_wo_pk_with_Index   |
| applicat     | active               |
| applicat     | active_customers     |
| applicat     | audit                |
| applicat     | currencies           |
| applicat     | location             |
| applicat     | mailbox_destinations |
| applicat     | missedcalls          |
| applicat     | tbl                  |
| applicat     | version              |
+--------------+----------------------+
9 rows in set (0.07 sec)
</pre><br /><h2 id="bad-sql-queries-of-users">Bad SQL queries of users</h2>

<p>Sometimes it could be interesting to find users who do evil SQL Queries which do for example <code>created_tmp_disk_tables</code>, <code>select_full_join</code>, <code>select_range_check</code> or <code>sort_merge_passes</code>. Those can be found as follows:</p>

<pre>
SELECT user, host, event_name
     , sum_created_tmp_disk_tables AS tmp_disk_tables
     , sum_select_full_join AS full_join
     , sum_select_range_check AS range_check
     , sum_sort_merge_passes AS sort_merge
  FROM performance_schema.events_statements_summary_by_account_by_event_name
 WHERE sum_created_tmp_disk_tables &gt; 0
    OR sum_select_full_join &gt; 0
    OR sum_select_range_check &gt; 0
    OR sum_sort_merge_passes &gt; 0
 ORDER BY sum_sort_merge_passes DESC
 LIMIT 10
;        
+-------+-------------+---------------+-----------------+-----------+-------------+------------+
| user  | host        | event_name    | tmp_disk_tables | full_join | range_check | sort_merge |
+-------+-------------+---------------+-----------------+-----------+-------------+------------+
| user1 | 192.168.0.3 | insert_select |               0 |      7033 |           0 |      10947 |
| user2 | 192.168.0.4 | insert_select |               0 |      6837 |           0 |      10792 |
| user1 | 192.168.0.1 | select        |        10742308 |      2095 |       23061 |         16 |
| user2 | 192.168.0.2 | select        |        10958067 |      2639 |       23162 |         14 |
+-------+-------------+---------------+-----------------+-----------+-------------+------------+

SELECT * FROM performance_schema.events_statements_summary_by_digest
 WHERE SUM_SELECT_FULL_JOIN &gt; 0\G
*************************** 1. row ***************************
                SCHEMA_NAME: applicat
                     DIGEST: 9472953c46e14f37683669177c469849
                DIGEST_TEXT: UPDATE EVENTS JOIN `machines` ON `events` . `server` = `machines` . `server` SET `events` . `machine` = `machines` . `id`
                 COUNT_STAR: 1
          SUM_ROWS_AFFECTED: 9359276
              SUM_ROWS_SENT: 0
          SUM_ROWS_EXAMINED: 56155770
SUM_CREATED_TMP_DISK_TABLES: 1
     SUM_CREATED_TMP_TABLES: 1
       SUM_SELECT_FULL_JOIN: 1
            SUM_SELECT_SCAN: 1
          SUM_NO_INDEX_USED: 1
                 FIRST_SEEN: 2016-11-23 20:55:47
                  LAST_SEEN: 2016-11-23 20:55:47
</pre><br /><h2 id="show-profile-in-performance_schema">SHOW PROFILE in PERFORMANCE_SCHEMA</h2>

<p>On systems with heavy traffic the PERFORMANCE_SCHEMA tables might be too small.</p>

<pre>
SHOW GLOBAL VARIABLES LIKE 'perf%events%stage%hist%long%';
+----------------------------------------------------+-------+
| Variable_name                                      | Value |
+----------------------------------------------------+-------+
| performance_schema_events_stages_history_long_size | 10000 |
+----------------------------------------------------+-------+

pager grep history_long
SHOW ENGINE PERFORMANCE_SCHEMA STATUS;
| performance_schema | events_waits_history_long.row_size       | 184      |
| performance_schema | events_waits_history_long.row_count      | 1000     |
| performance_schema | events_waits_history_long.memory         | 184000   |
| performance_schema | events_stages_history_long.row_size      | 88       |
| performance_schema | events_stages_history_long.row_count     | 1000     |
| performance_schema | events_stages_history_long.memory        | 88000    |
| performance_schema | events_statements_history_long.row_size  | 3024     |
| performance_schema | events_statements_history_long.row_count | 1000     |
| performance_schema | events_statements_history_long.memory    | 3024000  |

UPDATE performance_schema.setup_instruments
   SET ENABLED = 'YES', TIMED = 'YES'
 WHERE NAME LIKE '%statement/%';
UPDATE performance_schema.setup_instruments
   SET ENABLED = 'YES', TIMED = 'YES'
 WHERE NAME LIKE '%stage/%';
UPDATE performance_schema.setup_consumers
   SET ENABLED = 'YES'
 WHERE NAME LIKE '%events_statements_%';
UPDATE performance_schema.setup_consumers
   SET ENABLED = 'YES'
 WHERE NAME LIKE '%events_stages_%';

SELECT &lt;our query here...&gt;;

SELECT eshl.event_id AS Query_ID, TRUNCATE(eshl.timer_wait/1000000000000, 6) as Duration
     , LEFT(eshl.sql_text, 120) AS Query
  FROM performance_schema.events_statements_history_long AS eshl
  JOIN performance_schema.threads AS t ON t.thread_id = eshl.thread_id
 WHERE t.processlist_id = CONNECTION_ID();
+----------+-----------+-------------------------+
| Query_ID | Duration  | Query                   |
+----------+-----------+-------------------------+
|       12 | 13.560737 | select * from test.test |
+----------+-----------+-------------------------+

SELECT event_name AS Stage, TRUNCATE(timer_wait/1000000000000,6) AS Duration
  FROM performance_schema.events_stages_history_long
 WHERE nesting_event_id = 12;
+--------------------------------+-----------+
| Stage                          | Duration  |
+--------------------------------+-----------+
| stage/sql/starting             |  0.000043 |
| stage/sql/checking permissions |  0.000004 |
| stage/sql/Opening tables       |  0.002700 |
| stage/sql/init                 |  0.000025 |
| stage/sql/System lock          |  0.000009 |
| stage/sql/optimizing           |  0.000002 |
| stage/sql/statistics           |  0.000014 |
| stage/sql/preparing            |  0.000013 |
| stage/sql/executing            |  0.000000 |
| stage/sql/Sending data         | 13.557683 |
| stage/sql/end                  |  0.000002 |
| stage/sql/query end            |  0.000008 |
| stage/sql/closing tables       |  0.000006 |
| stage/sql/freeing items        |  0.000215 |
| stage/sql/cleaning up          |  0.000001 |
+--------------------------------+-----------+
</pre><br /><h2 id="select-insert-update-and-delete-per-table"><code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code> and <code>DELETE</code> per table</h2>

<p>Sometimes it is interesting to know how many <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code> or <code>DELETE</code> (DML) statementes have been exectuted against a specifict table (for example for <code>OPTIMZE TABLE</code>). This can be found as follows:</p>

<p>Works since MySQL 5.6</p>

<pre>
SELECT object_type, object_schema, object_name
     , count_star, count_read, count_write, count_fetch
     , count_insert, count_update, count_delete
  FROM performance_schema.table_io_waits_summary_by_table
 WHERE count_star &gt; 0
 ORDER BY count_star DESC
;
+-------------+---------------+--------------------------+--------------+--------------+-------------+--------------+--------------+--------------+--------------+
| object_type | object_schema | object_name              | count_star   | count_read   | count_write | count_fetch  | count_insert | count_update | count_delete |
+-------------+---------------+--------------------------+--------------+--------------+-------------+--------------+--------------+--------------+--------------+
| TABLE       | applicat      | location                 | 786427885735 | 786099567862 |   328317873 | 786099567862 |      1625431 |    325067666 |      1624776 |
| TABLE       | applicat      | phones                   |   2405560667 |   2045067895 |   360492772 |   2045067895 |         1327 |    360490982 |          463 |
| TABLE       | applicat      | events                   |   1412280597 |    762246599 |   650033998 |    762246599 |    327128550 |      9359276 |    313546172 |
| TABLE       | applicat      | bulk_destinations        |    506067937 |    506062957 |        4980 |    506062957 |         1174 |         2555 |         1251 |
| TABLE       | applicat      | queue_destinations       |    498821286 |    491098645 |     7722641 |    491098645 |           37 |      7722525 |           79 |
| TABLE       | applicat      | cdrcosts                 |    435492375 |    426092647 |     9399728 |    426092647 |      3295888 |      2512478 |      3591362 |
| TABLE       | applicat      | active                   |    405815523 |    390000298 |    15815225 |    390000298 |      3730452 |      8354383 |      3730390 |
| TABLE       | applicat      | config                   |    335967766 |    335813232 |      154534 |    335813232 |           16 |       154517 |            1 |
| TABLE       | applicat      | subscriptions            |    138623149 |    117231406 |    21391743 |    117231406 |          723 |     21390398 |          622 |
...
| TABLE       | applicat      | plan_products            |            1 |            1 |           0 |            1 |            0 |            0 |            0 |
| TABLE       | applicat      | voucher_batches          |            1 |            1 |           0 |            1 |            0 |            0 |            0 |
| TABLE       | applicat      | vouchers                 |            1 |            1 |           0 |            1 |            0 |            0 |            0 |
+-------------+---------------+--------------------------+--------------+--------------+-------------+--------------+--------------+--------------+--------------+
123 rows in set (0.03 sec)

SELECT object_type, object_schema, object_name, index_name
     , count_star, count_read, count_write, count_fetch
     , count_insert, count_update, count_delete
  FROM performance_schema.table_io_waits_summary_by_index_usage
 WHERE count_star &gt; 0
   AND index_name IS NOT NULL
 ORDER BY count_star DESC
;
+-------------+---------------+--------------------------+---------------------+--------------+--------------+-------------+--------------+--------------+--------------+--------------+
| object_type | object_schema | object_name              | index_name          | count_star   | count_read   | count_write | count_fetch  | count_insert | count_update | count_delete |
+-------------+---------------+--------------------------+---------------------+--------------+--------------+-------------+--------------+--------------+--------------+--------------+
| TABLE       | applicat      | phones                   | name                |   2044563494 |   1684480557 |   360082937 |   1684480557 |            0 |    360082474 |          463 |
| TABLE       | applicat      | location                 | username            |   1094446716 |   1094446444 |         272 |   1094446444 |            0 |            0 |          272 |
| TABLE       | applicat      | events                   | time                |    599440206 |    299721243 |   299718963 |    299721243 |            0 |            0 |    299718963 |
| TABLE       | applicat      | bulk_destinations        | PRIMARY             |    506066763 |    506062957 |        3806 |    506062957 |            0 |         2555 |         1251 |
| TABLE       | applicat      | phones                   | customer            |    336101637 |    336101632 |           5 |    336101632 |            0 |            5 |            0 |
| TABLE       | applicat      | config                   | PRIMARY             |    335967246 |    335812727 |      154519 |    335812727 |            0 |       154518 |            1 |
| TABLE       | applicat      | domains                  | domain              |    134049716 |    134049716 |           0 |    134049716 |            0 |            0 |            0 |
| TABLE       | applicat      | active                   | dtype               |    128545758 |    128500448 |       45310 |    128500448 |            0 |        45310 |            0 |
| TABLE       | applicat      | plan_routes              | PRIMARY             |    118272835 |    118272835 |           0 |    118272835 |            0 |            0 |            0 |
...
| TABLE       | applicat      | provisioning             | model               |            1 |            1 |           0 |            1 |            0 |            0 |            0 |
| TABLE       | applicat      | voucher_batches          | PRIMARY             |            1 |            1 |           0 |            1 |            0 |            0 |            0 |
| TABLE       | applicat      | messages                 | callid              |            1 |            1 |           0 |            1 |            0 |            0 |            0 |
+-------------+---------------+--------------------------+---------------------+--------------+--------------+-------------+--------------+--------------+--------------+--------------+
371 rows in set (0.04 sec)
</pre><br /><h2 id="top-long-running-queries">Top long running queries</h2>

<p>Works since MySQL 5.6</p>

<pre>
UPDATE performance_schema.setup_consumers SET enabled = 1
 WHERE name = 'events_statements_history_long';

For MariaDB:

SELECT left(digest_text, 64)
     , ROUND(SUM(timer_end-timer_start)/1000000000, 1) AS tot_exec_ms
     , ROUND(SUM(timer_end-timer_start)/1000000000/COUNT(*), 1) AS avg_exec_ms
     , ROUND(MIN(timer_end-timer_start)/1000000000, 1) AS min_exec_ms
     , ROUND(MAX(timer_end-timer_start)/1000000000, 1) AS max_exec_ms
     , ROUND(SUM(timer_wait)/1000000000, 1) AS tot_wait_ms
     , ROUND(SUM(timer_wait)/1000000000/COUNT(*), 1) AS avg_wait_ms
     , ROUND(MIN(timer_wait)/1000000000, 1) AS min_wait_ms
     , ROUND(MAX(timer_wait)/1000000000, 1) AS max_wait_ms
     , ROUND(SUM(lock_time)/1000000000, 1) AS tot_lock_ms
     , ROUND(SUM(lock_time)/1000000000/COUNT(*), 1) AS avglock_ms
     , ROUND(MIN(lock_time)/1000000000, 1) AS min_lock_ms
     , ROUND(MAX(lock_time)/1000000000, 1) AS max_lock_ms
     , MIN(LEFT(DATE_SUB(NOW(), INTERVAL (isgs.VARIABLE_VALUE - TIMER_START*10e-13) second), 19)) AS first_seen
     , MAX(LEFT(DATE_SUB(NOW(), INTERVAL (isgs.VARIABLE_VALUE - TIMER_START*10e-13) second), 19)) AS last_seen
     , COUNT(*) as cnt
  FROM performance_schema.events_statements_history_long
  JOIN information_schema.global_status AS isgs
 WHERE isgs.variable_name = 'UPTIME'
 GROUP BY LEFT(digest_text,64)
 ORDER BY tot_exec_ms DESC
;

For MySQL:

SELECT left(digest_text, 64)
     , ROUND(SUM(timer_end-timer_start)/1000000000, 1) AS tot_exec_ms
     , ROUND(SUM(timer_end-timer_start)/1000000000/COUNT(*), 1) AS avg_exec_ms
     , ROUND(MIN(timer_end-timer_start)/1000000000, 1) AS min_exec_ms
     , ROUND(MAX(timer_end-timer_start)/1000000000, 1) AS max_exec_ms
     , ROUND(SUM(timer_wait)/1000000000, 1) AS tot_wait_ms
     , ROUND(SUM(timer_wait)/1000000000/COUNT(*), 1) AS avg_wait_ms
     , ROUND(MIN(timer_wait)/1000000000, 1) AS min_wait_ms
     , ROUND(MAX(timer_wait)/1000000000, 1) AS max_wait_ms
     , ROUND(SUM(lock_time)/1000000000, 1) AS tot_lock_ms
     , ROUND(SUM(lock_time)/1000000000/COUNT(*), 1) AS avglock_ms
     , ROUND(MIN(lock_time)/1000000000, 1) AS min_lock_ms
     , ROUND(MAX(lock_time)/1000000000, 1) AS max_lock_ms
     , MIN(LEFT(DATE_SUB(NOW(), INTERVAL (isgs.VARIABLE_VALUE - TIMER_START*10e-13) second), 19)) AS first_seen
     , MAX(LEFT(DATE_SUB(NOW(), INTERVAL (isgs.VARIABLE_VALUE - TIMER_START*10e-13) second), 19)) AS last_seen
     , COUNT(*) as cnt
  FROM performance_schema.events_statements_history_long
  JOIN performance_schema.global_status AS isgs
 WHERE isgs.variable_name = 'UPTIME'
 GROUP BY LEFT(digest_text,64)
 ORDER BY tot_exec_ms DESC
;


+------------------------------------------------------------------+-------------+-------------+-------------+---------------------+---------------------+-----+
| left(digest_text, 64)                                            | tot_exec_ms | tot_wait_ms | tot_lock_ms | first_seen          | last_seen           | cnt |
+------------------------------------------------------------------+-------------+-------------+-------------+---------------------+---------------------+-----+
| INSERT INTO `test` SELECT ? , DATA , ? FROM `test`               |     50493.5 |     50493.5 |        26.3 | 2015-11-12 16:41:35 | 2015-11-12 16:42:04 |  20 |
| SELECT LEFT ( `digest_text` , ? ) , `ROUND` ( SUM ( `timer_end`  |     14434.6 |     14434.6 |        25.8 | 2015-11-12 16:48:44 | 2015-11-12 17:07:15 |   6 |
| SELECT * FROM `test`                                             |      7483.0 |      7483.0 |         0.2 | 2015-11-12 16:41:16 | 2015-11-12 16:42:34 |   2 |
| SHOW ENGINE INNODB STATUS                                        |      1912.4 |      1912.4 |         0.0 | 2015-11-12 16:37:19 | 2015-11-12 17:07:36 | 687 |
| SHOW GLOBAL VARIABLES                                            |      1091.1 |      1091.1 |        68.8 | 2015-11-12 16:37:19 | 2015-11-12 17:07:36 | 687 |
| SHOW GLOBAL STATUS                                               |       638.7 |       638.7 |        40.8 | 2015-11-12 16:37:19 | 2015-11-12 17:07:36 | 687 |
| SELECT LEFT ( `digest_text` , ? ) , SUM ( `timer_end` - `timer_s |       356.2 |       356.2 |        42.4 | 2015-11-12 16:42:38 | 2015-11-12 16:45:00 |   6 |
| SELECT `digest_text` , SUM ( `timer_end` - `timer_start` ) / ? A |       325.3 |       325.3 |         0.4 | 2015-11-12 16:40:44 | 2015-11-12 16:42:18 |   3 |
| SELECT `DIGEST_TEXT` , ( `TIMER_END` - `TIMER_START` ) / ? AS `e |       163.2 |       163.2 |         1.0 | 2015-11-12 16:37:44 | 2015-11-12 16:39:22 |   9 |
| SELECT LOWER ( REPLACE ( trx_state , ?, ... ) ) AS state , COUNT |       133.9 |       133.9 |        80.2 | 2015-11-12 16:37:19 | 2015-11-12 17:07:36 | 687 |
+------------------------------------------------------------------+-------------+-------------+-------------+---------------------+---------------------+-----+</pre><br /><h2 id="tables-never-written-to">Tables never written to</h2>

<p>If you want to find tables which it was never written to (or read from) since last instance restart you can use the following query. Works since MySQL 5.6</p>

<p><strong>Caution:</strong></p>
<ul><li><code>count_read</code> can only be taken as argument if a physical backup method (NOT <code>mysqldump</code>) is used.</li>
  <li>If <code>count_write</code> is 0 it does not necessarily mean that there was no write statement (no matching write)!</li>
  <li>If tables are empty <code>SELECT</code> statements are not counted (<code>count_read</code> = 0).</li>
</ul><pre>
SELECT t.table_schema, t.table_name, t.table_rows, tio.count_read, tio.count_write
  FROM information_schema.tables AS t
  JOIN performance_schema.table_io_waits_summary_by_table AS tio
    ON tio.object_schema = t.table_schema AND tio.object_name = t.table_name
 WHERE t.table_schema NOT IN ('mysql', 'information_schema', 'performance_schema', 'sys')
   AND tio.count_write = 0
 ORDER BY t.table_schema, t.table_name
;
+--------------+--------------------------+------------+------------+-------------+
| table_schema | table_name               | table_rows | count_read | count_write |
+--------------+--------------------------+------------+------------+-------------+
| applicat     | active_customers         |          0 |    3692444 |           0 |
| applicat     | addresses                |          0 |     601072 |           0 |
| applicat     | cardgroups               |          0 |          0 |           0 |
| applicat     | cards                    |          0 |          0 |           0 |
| applicat     | card_batches             |          0 |          0 |           0 |
| applicat     | cb_customers             |          5 |         14 |           0 |
| applicat     | cdrcost_taxes            |          0 |   27849511 |           0 |
| applicat     | cdrs_archive             |          0 |          0 |           0 |
| applicat     | classes                  |         17 |        156 |           0 |
...
| applicat     | version                  |          5 |        162 |           0 |
| applicat     | vouchers                 |          0 |          1 |           0 |
| applicat     | voucher_batches          |          0 |          1 |           0 |
+--------------+--------------------------+------------+------------+-------------+
43 rows in set (0.14 sec)
</pre><br /><h2 id="dml-ddl-dcl-per-account">DML, DDL and DCL per account</h2>

<p>Which accounts execute DML statements?</p>

<pre>
SELECT user, host, SUBSTR(event_name, 15) AS dml, SUM(count_star) AS sum_dml
  FROM performance_schema.events_statements_summary_by_account_by_event_name
 WHERE count_star &gt; 0
   AND event_name IN ('statement/sql/update', 'statement/sql/insert', 'statement/sql/delete'
     , 'statement/sql/load', 'statement/sql/replace', 'statement/sql/replace_select'
     , 'statement/sql/insert_select', 'statement/sql/delete_multi', 'statement/sql/update_multi'
     , 'statement/sql/do', 'statement/sql/execute_sql')
 GROUP BY user, host, dml
 ORDER BY user, host, dml
;
+-----------------+-----------+---------------+---------+
| user            | host      | dml           | sum_dml |
+-----------------+-----------+---------------+---------+
| root            | localhost | execute_sql   |     240 |
| root            | localhost | insert        |      10 |
| root            | localhost | insert_select |       1 |
| root            | localhost | replace       |       3 |
| root            | localhost | update        |      17 |
| root            | localhost | update_multi  |       1 |
| service_manager | localhost | delete        |    2605 |
| service_manager | localhost | insert        |   20387 |
| service_manager | localhost | update        |    3814 |
+-----------------+-----------+---------------+---------+
</pre><br /><p>How many DML statements are executed per schema?</p>

<pre>
SELECT object_schema, SUM(count_insert + count_update + count_delete) AS count_dml
  FROM performance_schema.table_io_waits_summary_by_table
 WHERE (count_insert + count_update + count_delete) &gt; 0
 GROUP BY object_schema
 ORDER BY count_dml DESC
;
+------------------+-----------+
| object_schema    | count_dml |
+------------------+-----------+
| zabbix           |     52660 |
| focmm            |     36183 |
| mem__quan        |     29795 |
| mem__inventory   |      3086 |
| mem__instruments |      2783 |
| mem__events      |      1521 |
| sys              |         6 |
+------------------+-----------+
</pre><br /><p>Which accounts execute DDL/DCL statements?</p>

<pre>
SELECT user, host, SUBSTR(event_name, 15) AS event_name, count_star
  FROM performance_schema.events_statements_summary_by_account_by_event_name
 WHERE count_star &gt; 0 AND
     ( event_name LIKE 'statement/sql/create%'
    OR event_name LIKE 'statement/sql/alter%'
    OR event_name LIKE 'statement/sql/drop%'
    OR event_name LIKE 'statement/sql/rename%'
    OR event_name LIKE 'statement/sql/grant%'
    OR event_name LIKE 'statement/sql/revoke%'
    OR event_name LIKE 'statement/sql/optimize%'
    OR event_name LIKE 'statement/sql/truncate%'
    OR event_name LIKE 'statement/sql/repair%'
    OR event_name LIKE 'statement/sql/check%'
     )
;
+------+-----------+--------------+------------+
| user | host      | event_name   | count_star |
+------+-----------+--------------+------------+
| root | localhost | alter_table  |          1 |
| root | localhost | rename_table |          1 |
+------+-----------+--------------+------------+
</pre><br /><p>How many DML/DDL statements are executed per schema?</p>

<pre>
SELECT schema_name, IF(SUBSTRING_INDEX(digest_text, ' ', 1) IN ('CREATE', 'DROP', 'ALTER', 'GRANT', 'REVOKE'), 'DDL', 'DML') AS statement_type, COUNT(*) AS count
  FROM performance_schema.events_statements_summary_by_digest
 GROUP BY statement_type, schema_name
 ORDER BY statement_type DESC, count DESC
;
+-------------------------+----------------+-------+
| schema_name             | statement_type | count |
+-------------------------+----------------+-------+
| mem                     | DML            |   478 |
| mysql                   | DML            |   193 |
| mem__instruments        | DML            |   121 |
| mem__inventory          | DML            |   116 |
| zabbix                  | DML            |   115 |
| mem__events             | DML            |    33 |
| sys                     | DML            |    25 |
| mem__config             | DML            |    24 |
| performance_schema      | DML            |    20 |
| mem__quan               | DML            |     9 |
| NULL                    | DML            |     7 |
| mem__advisors           | DML            |     4 |
| mem__bean_config        | DML            |     3 |
| mem__advisor_text       | DML            |     3 |
| mem__enterprise         | DML            |     3 |
| mem__instruments_config | DML            |     2 |
| sys                     | DDL            |   186 |
| mysql                   | DDL            |   179 |
+-------------------------+----------------+-------+
</pre><br /><h2 id="erroneous-mysql-queries">Finding syntactically wrong/erroneous MySQL queries</h2>

<p>Up to MySQL 5.5 syntactically wrong queries ended up in the MySQL Error Log as well. In MySQL 5.6 this behaviour has changed. But how can we find them now?</p>

<p>In the MySQL <code>performance_schema</code>, since 5.6, queries with errors or warnings can be found in the <code>events_statements_history</code> tables as follows:</p>

<pre>
UPDATE performance_schema.setup_consumers
   SET enabled = 'YES'
 WHERE name LIKE 'events_statements_history%';

SELECT * FROM performance_schema.events_statements_history
 WHERE errors != 0 OR warnings != 0\G
*************************** 1. row ***************************
              THREAD_ID: 97
               EVENT_ID: 20
           END_EVENT_ID: 20
             EVENT_NAME: statement/sql/error
                 SOURCE: mysqld.cc:962
            TIMER_START: 858021191531530000
              TIMER_END: 858021191624337000
             TIMER_WAIT: 92807000
               SQL_TEXT: select counter(*) from test
         CURRENT_SCHEMA: test
            MYSQL_ERRNO: 1064
      RETURNED_SQLSTATE: 42000
           MESSAGE_TEXT: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use
                 ERRORS: 1
               WARNINGS: 0
</pre><br /><h2 id="finding-queries-served-by-query-cache">Finding queries served by MySQL Query Cache</h2>

<p>Possibly not 100% accurate (also lists queries on P_S). Works since MySQL 5.6.</p>

<pre>
UPDATE performance_schema.setup_consumers SET enabled = 1
 WHERE name = 'events_statements_history_long';

SHOW GLOBAL VARIABLES LIKE 'query_cache____e';

SHOW GLOBAL STATUS LIKE 'qcache_hits';

SELECT sql_text, ROUND(SUM(timer_wait)/100000000, 3) AS time_wait_ms, COUNT(*)
     , ROUND(SUM(timer_wait)/100000000/COUNT(*), 3) AS time_wait_ms_avg
  FROM performance_schema.events_statements_history_long
 WHERE digest IS NULL
   AND sql_text IS NOT NULL
   AND errors = 0
 GROUP BY event_name, sql_text
;
+----------------------------------+--------------+----------+------------------+
| sql_text                         | time_wait_ms | COUNT(*) | time_wait_ms_avg |
+----------------------------------+--------------+----------+------------------+
| select * from test where id = 42 |        0.411 |        1 |            0.411 |
| select count(*) from test        |        1.525 |        3 |            0.508 |
+----------------------------------+--------------+----------+------------------+
</pre><br /><h2 id="grant-sys-schema-access">Grant access to <code>sys</code> schema to another user</h2>

<p>The MySQL documentation on how to <a href="https://dev.mysql.com/doc/refman/5.7/en/sys-schema-prerequisites.html" target="_blank" title="Prerequisites for Using the sys Schema">grant acces to the sys schema</a> is a bit vague...</p>

<p>The following privileges seem to work:</p>

<pre>
DROP USER 'sys_user'@'%';
CREATE USER 'sys_user'@'%' IDENTIFIED BY 'S3cr3t!!!';

GRANT SELECT ON sys.* TO 'sys_user'@'%';
GRANT EXECUTE ON sys.* TO 'sys_user'@'%';
GRANT INSERT, UPDATE ON sys.sys_config TO 'sys_user'@'%';

-- In small letters!
GRANT SELECT ON performance_schema.* TO 'sys_user'@'%';

--

GRANT PROCESS ON *.* TO sys_user@'%';

--

GRANT SUPER ON *.* TO 'sys_user'@'%';
GRANT CREATE TEMPORARY TABLES on sys.* TO 'sys_user'@'%';
GRANT UPDATE ON performance_schema.setup_consumers TO 'sys_user'@'%';
GRANT UPDATE ON performance_schema.setup_instruments TO 'sys_user'@'%';
GRANT UPDATE ON performance_schema.threads TO 'sys_user'@'%';
GRANT DELETE ON performance_schema.setup_actors TO 'sys_user'@'%';
GRANT INSERT ON performance_schema.setup_actors TO 'sys_user'@'%';
GRANT DELETE ON performance_schema.setup_objects TO 'sys_user'@'%';
GRANT INSERT ON performance_schema.setup_objects TO 'sys_user'@'%';
</pre><br /><pre>
SELECT * FROM sys.schema_redundant_indexes;
SELECT * FROM sys.schema_unused_indexes;
SELECT * FROM sys.schema_index_statistics;

--

SELECT * FROM sys.innodb_buffer_stats_by_table;

--

-- Needs super: GRANT SUPER ON *.* TO 'sys_user'@'%';
CALL sys.ps_setup_save(10);
CALL sys.ps_setup_reload_saved();

CALL sys.ps_setup_enable_instrument('wait');
CALL sys.ps_setup_enable_instrument('stage');
CALL sys.ps_setup_enable_instrument('statement');
CALL sys.ps_setup_enable_consumer('current');
CALL sys.ps_setup_enable_consumer('history_long');

CALL sys.ps_setup_reset_to_default(TRUE);
</pre><br /><h2 id="grant-ps-schema-access">Grant access to <code>PERFORMANCE_SCHEMA</code> schema to another user</h2>

<pre>
SQL&gt; GRANT SELECT ON performance_schema.* TO 'usr'@'localhost';
SQL&gt; GRANT SELECT, UPDATE ON performance_schema.setup_instruments TO 'usr'@'localhost';
SQL&gt; GRANT DROP ON performance_schema.* TO 'usr'@'localhost';
</pre><br /><p>Lit: <a href="https://dev.mysql.com/doc/refman/5.7/en/performance-schema-table-characteristics.html" target="_blank" title="Performance Schema General Table Characteristics">Performance Schema General Table Characteristics</a></p>


<h2 id="innodb-locks">Find InnoDB Locks</h2>

<pre>
SQL&gt; SELECT lock_trx_id, lock_mode, lock_type, lock_table, lock_index
  FROM information_schema.innodb_locks;
+-------------+-----------+-----------+---------------+------------+
| lock_trx_id | lock_mode | lock_type | lock_table    | lock_index |
+-------------+-----------+-----------+---------------+------------+
| 25382       | X         | RECORD    | `test`.`test` | PRIMARY    |
| 25381       | X         | RECORD    | `test`.`test` | PRIMARY    |
+-------------+-----------+-----------+---------------+------------+

SQL&gt; SELECT trx_id, trx_state, trx_started, trx_wait_started, trx_query, trx_tables_in_use, trx_tables_locked, trx_lock_structs, trx_rows_locked, trx_rows_modified
  FROM information_schema.innodb_trx;
+--------+-----------+---------------------+---------------------+--------------------------------------------+-------------------+-------------------+------------------+-----------------+-------------------+
| trx_id | trx_state | trx_started         | trx_wait_started    | trx_query                                  | trx_tables_in_use | trx_tables_locked | trx_lock_structs | trx_rows_locked | trx_rows_modified |
+--------+-----------+---------------------+---------------------+--------------------------------------------+-------------------+-------------------+------------------+-----------------+-------------------+
| 25381  | RUNNING   | 2019-12-11 21:52:31 | NULL                | NULL                                       |                 0 |                 1 |                2 |              99 |                 0 |
| 25382  | LOCK WAIT | 2019-12-11 21:52:44 | 2019-12-11 21:55:31 | update test set data = 'bla' where id = 43 |                 1 |                 1 |                2 |               3 |                 1 |
+--------+-----------+---------------------+---------------------+--------------------------------------------+-------------------+-------------------+------------------+-----------------+-------------------+
</pre><br /><h2 id="metadata-locks">Find Metadata Locks</h2>

<h3>For MySQL</h3>

<p>Instrument <code>wait/lock/metadata/sql/mdl</code> must be enabled first!</p>

<pre>
SQL&gt; SELECT * FROM performance_schema.metadata_locks;
+-------------+--------------------+----------------+---------------------+---------------+-------------+-----------------+
| OBJECT_TYPE | OBJECT_SCHEMA      | OBJECT_NAME    | LOCK_TYPE           | LOCK_DURATION | LOCK_STATUS | OWNER_THREAD_ID |
+-------------+--------------------+----------------+---------------------+---------------+-------------+-----------------+
| TABLE       | test               | test           | SHARED_READ         | TRANSACTION   | GRANTED     |           10446 |
| GLOBAL      | NULL               | NULL           | INTENTION_EXCLUSIVE | STATEMENT     | GRANTED     |           10447 |
| SCHEMA      | test               | NULL           | INTENTION_EXCLUSIVE | TRANSACTION   | GRANTED     |           10447 |
| TABLE       | test               | test           | SHARED_UPGRADABLE   | TRANSACTION   | GRANTED     |           10447 |
| TABLE       | test               | test           | EXCLUSIVE           | TRANSACTION   | PENDING     |           10447 |
| TABLE       | performance_schema | metadata_locks | SHARED_READ         | TRANSACTION   | GRANTED     |           10445 |
+-------------+--------------------+----------------+---------------------+---------------+-------------+-----------------+

SQL&gt; SELECT *
  FROM performance_schema.threads
 WHERE thread_id IN (10446, 10447);
+-----------+----------------+------------------+------------------+----------------+---------------------+------------------+---------------------------------+------------------------------------+
| THREAD_ID | PROCESSLIST_ID | PROCESSLIST_USER | PROCESSLIST_HOST | PROCESSLIST_DB | PROCESSLIST_COMMAND | PROCESSLIST_TIME | PROCESSLIST_STATE               | PROCESSLIST_INFO                   |
+-----------+----------------+------------------+------------------+----------------+---------------------+------------------+---------------------------------+------------------------------------+
|     10446 |          10421 | root             | localhost        | test           | Sleep               |               77 | NULL                            | NULL                               |
|     10447 |          10422 | root             | localhost        | test           | Query               |               66 | Waiting for table metadata lock | alter table test add column c8 int |
+-----------+----------------+------------------+------------------+----------------+---------------------+------------------+---------------------------------+------------------------------------+
</pre><br /><h3>For MariaDB</h3>

<p><b>Metadata Lock Plug-in</b> must be enabled first!</p>

<pre>
SQL&gt; SELECT * FROM information_schema.metadata_lock_info;
+-----------+-------------------------+----------------------+--------------+------------+
| THREAD_ID | LOCK_MODE               | LOCK_TYPE            | TABLE_SCHEMA | TABLE_NAME |
+-----------+-------------------------+----------------------+--------------+------------+
|       400 | MDL_BACKUP_ALTER_COPY   | Backup lock          |              |            |
|       401 | MDL_SHARED_WRITE        | Table metadata lock  | test         | test       |
|       400 | MDL_SHARED_UPGRADABLE   | Table metadata lock  | test         | test       |
|       400 | MDL_INTENTION_EXCLUSIVE | Schema metadata lock | test         |            |
+-----------+-------------------------+----------------------+--------------+------------+
</pre><br /><p><b>Caution</b>: Query on MariaDB is slightly differnt:</p>

<pre>
SQL&gt; SELECT *
  FROM performance_schema.threads
 WHERE PROCESSLIST_ID IN (400, 401);
+-----------+----------------+------------------+------------------+----------------+---------------------+------------------+---------------------------------+------------------------------------+
| THREAD_ID | PROCESSLIST_ID | PROCESSLIST_USER | PROCESSLIST_HOST | PROCESSLIST_DB | PROCESSLIST_COMMAND | PROCESSLIST_TIME | PROCESSLIST_STATE               | PROCESSLIST_INFO                   |
+-----------+----------------+------------------+------------------+----------------+---------------------+------------------+---------------------------------+------------------------------------+
|       416 |            400 | root             | localhost        | test           | Query               |               51 | Waiting for table metadata lock | alter table test add column c6 int |
|       417 |            401 | root             | localhost        | test           | Sleep               |              830 | NULL                            | NULL                               |
+-----------+----------------+------------------+------------------+----------------+---------------------+------------------+---------------------------------+------------------------------------+
</pre><br /><p>If this is a bug or not we do not know (<a href="https://jira.mariadb.org/browse/MDEV-21294" target="_blank" title="Name or content of metadata_lock_info table is wrong">MDEV-21294</a>)...</p>


<h2 id="statements-before-sleep">What did a Connection before sleeping?

<pre>
SQL&gt; SELECT event_id, sql_text, current_schema
  FROM performance_schema.events_statements_history
 WHERE thread_id = 10446
 ORDER BY event_id DESC
 LIMIT 2;
+----------+-----------------------------------+----------------+                                                                                                                                                                       
| event_id | sql_text                          | current_schema |                                                                                                                                                                       
+----------+-----------------------------------+----------------+
|        9 | select * from test where id &lt; 100 | test           |
|        8 | start transaction                 | test           |
+----------+-----------------------------------+----------------+
</pre><br /><h2 id="how-many-statements-did-another-connection">How many statements did another (sleeping) connection?</h2>

</h2><p>This works only in MySQL 5.7. MariaDB does still contain P_S version 5.6 where some tables needed are not present. Possibly MariaDB 10.5 will contain parts of P_S 5.7 or newer.</p>

<pre>
SELECT thread_id, processlist_id AS 'Processlist Id', processlist_user as User, processlist_host as Host
     , processlist_db as db, processlist_command as Command, processlist_time as Time
  FROM performance_schema.threads
 WHERE type = 'FOREGROUND'
   AND processlist_id != CONNECTION_ID()
   AND processlist_command != 'Daemon'
   AND processlist_command = 'Sleep'
   AND processlist_time &gt; 1
;
+-----------+----------------+------+-----------+------+---------+------+
| thread_id | Processlist Id | User | Host      | db   | Command | Time |
+-----------+----------------+------+-----------+------+---------+------+
|      4305 |           4280 | app  | localhost | test | Sleep   |    7 |
+-----------+----------------+------+-----------+------+---------+------+

SET @thread_id = 4305;
SET @processlist_id = 4280;

SELECT variable_name, variable_value
  FROM performance_schema.status_by_thread
 WHERE thread_id = (SELECT thread_id
                      FROM performance_schema.threads
                     WHERE processlist_id = @processlist_id
                   )
  AND (variable_name IN ('Queries', 'Questions') OR variable_name LIKE 'Com\_%')
;
+--------------------+----------------+
| variable_name      | variable_value |
+--------------------+----------------+
| Com_stmt_reprepare | 0              |
| Queries            | 12991          |
| Questions          | 26             |
+--------------------+----------------+
</pre><br /><p>This result is completely wrong! We filed a bug for it: <a href="https://bugs.mysql.com/bug.php?id=98498" target="_blank" title="P_S view status_by_thread does not reflect correct results">P_S view status_by_thread does not reflect correct results</a></p>

<p><b>Workaround:</b> (works also on MariaDB 10.2 and newer!)</p>

<pre>
SELECT event_name, COUNT(*)
  FROM performance_schema.events_statements_history
 WHERE thread_id = @thread_id
 GROUP BY event_name
;
+-----------------------------+----------+
| event_name                  | COUNT(*) |
+-----------------------------+----------+
| statement/sql/error         |        1 |
| statement/sql/insert_select |        5 |
| statement/sql/select        |        1 |
| statement/sql/show_status   |        2 |
| statement/sql/update        |        1 |
+-----------------------------+----------+
</pre><br /><p>This result could not reflect the right number of values if some where lost...</p>

<pre>
SHOW GLOBAL STATUS LIKE 'performance_schema_thread%lost';
+------------------------------------------+-------+
| Variable_name                            | Value |
+------------------------------------------+-------+
| Performance_schema_thread_classes_lost   | 0     |
| Performance_schema_thread_instances_lost | 0     |
+------------------------------------------+-------+
</pre><br /></div></div></div><div class="field field-name-taxonomy-vocabulary-2 field-type-taxonomy-term-reference field-label-above"><div class="field-label">tags:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="/taxonomy/term/47" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">performance</a></div><div class="field-item odd"><a href="/taxonomy/term/346" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">schema</a></div><div class="field-item even"><a href="/taxonomy/term/501" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">performance_schema</a></div><div class="field-item odd"><a href="/taxonomy/term/149" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">hint</a></div><div class="field-item even"><a href="/taxonomy/term/151" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">index</a></div><div class="field-item odd"><a href="/taxonomy/term/330" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">galera</a></div><div class="field-item even"><a href="/taxonomy/term/503" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">rbr</a></div><div class="field-item odd"><a href="/taxonomy/term/54" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">replication</a></div><div class="field-item even"><a href="/taxonomy/term/150" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">primary key</a></div><div class="field-item odd"><a href="/taxonomy/term/841" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">sys</a></div></div></div>  	</div>

    
    	    <div class="links"><ul class="links inline"><li class="comment_forbidden first last"><span><a href="/user/login?destination=node/794%23comment-form">Log in</a> or <a href="/user/register?destination=node/794%23comment-form">register</a> to post comments</span></li>
</ul></div>
	  
	</div> <!-- /node-inner -->
</div> <!-- /node-->

		</div>

  </div>
</div> <!-- /block-inner /block -->  </div>
        </div>

        
      </div>
    </div> <!-- /content-inner /content -->

    
          <div id="sidebar-first" class="column sidebar first">
        <div id="sidebar-first-inner" class="inner">
            <div class="region region-sidebar-first">
    <div id="block-system-navigation" class="block block-system block-menu clearfix">
  <div class="block-inner">

                <h2 class="block-title">Navigation</h2>
          		
		<div class="content" >
		  <ul class="menu"><li class="first last leaf"><a href="/tracker">Recent content</a></li>
</ul>		</div>

  </div>
</div> <!-- /block-inner /block -->  </div>
        </div>
      </div>
     <!-- /sidebar-first -->

     <!-- /sidebar-second -->

  </div> <!-- /main -->
  </div><!--/page-inner-->
  </div> <!-- /page -->
  </div> <!-- /top -->

  <!-- ______________________ FOOTER _______________________ -->

      <div id="footer">
        <div class="region region-footer">
    <div id="block-block-8" class="block block-block clearfix">
  <div class="block-inner">

                <h2 class="block-title">Trademarks</h2>
          		
		<div class="content" >
		  <a href="/aggregator/rss/5" class="social_rss"><span class="social_link_text">RSS</span></a>
<a href="http://www.linkedin.com/groups/fromdual-3806893" class="social_linkedin" target="_blank" title="LinkedIn"><span class="social_link_text">LinkedIn</span></a>
<a href="https://twitter.com/fromdual" class="social_twitter" target="_blank" title="Twitter"><span class="social_link_text">Twitter</span></a>
<a href="https://www.xing.com/companies/fromdualgmbh" class="social_xing" target="_blank" title="Xing"><span class="social_link_text">Xing</span></a>
<a href="http://www.facebook.com/home.php?sk=group_192493034104245" class="social_facebook" target="_blank" title="Facebook"><span class="social_link_text">Facebook</span></a>
<a href="http://www.flickr.com/photos/fromdual/" class="social_flickr" target="_blank" title="Flickr"><span class="social_link_text">Flickr</span></a>
<a href="https://plus.google.com/117400696912355139539/posts" class="social_plusgoogle" target="_blank" title="Google+"><span class="social_link_text">Google+</span></a>
<script src="https://platform.twitter.com/widgets.js" type="text/javascript"></script><a href="https://twitter.com/fromdual" class="twitter-follow-button" target="_blank" title="Twitter">Follow @fromdual</a>
<hr /><br />
MySQL, InnoDB and Oracle are registered trademarks of Oracle Corp. MariaDB is a trademark of Monty Program AB.
All other trademarks are property of their respective owners. Other product or company names mentioned may be trademarks or trade names of their respective owner.		</div>

  </div>
</div> <!-- /block-inner /block -->  </div>
    </div> <!-- /footer -->
        </body>

</html>
